{% extends 'base.html' %}

{% block content %}
<div class="container" style="max-width: 800px; margin-top: 40px;">
    
    <!-- Profile Header -->
    <div style="display: flex; gap: 30px; align-items: flex-start; margin-bottom: 40px;">
        <div style="flex-shrink: 0;">
            {% if user.profile_image_url %}
            <img src="{{ user.profile_image_url }}" alt="Profile" style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover; box-shadow: var(--shadow);">
            {% else %}
            <div style="width: 150px; height: 150px; background: #ddd; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 60px; color: var(--gray);">
                <i class="fas fa-user"></i>
            </div>
            {% endif %}
        </div>
        <div style="flex-grow: 1;">
            <h1>{{ user.full_name }}</h1>
            <p style="color: var(--gray); margin-top: 5px;">Member since {{ user.created_at[:4] }}</p>
            <p style="margin-top: 15px;"><strong>Email:</strong> {{ user.email }}</p>
            
            <div style="margin-top: 20px;">
                <span style="font-weight: bold; font-size: 18px;"><i class="fas fa-star" style="color: var(--primary);"></i> 0 Reviews</span>
                <span style="margin: 0 10px; color: #ddd;">|</span>
                <span style="font-weight: bold; font-size: 18px;"><i class="fas fa-check-circle" style="color: green;"></i> Identity verified</span>
            </div>
        </div>
    </div>

    <hr style="border: 0; border-top: 1px solid #ddd; margin-bottom: 30px;">

    <!-- User Listings -->
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h3>{{ user.full_name }}'s Listings</h3>
        <a href="/upload" class="btn-primary" style="padding: 8px 16px; font-size: 14px;"><i class="fas fa-plus"></i> Add New</a>
    </div>
    
    {% if rooms %}
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 20px; margin-top: 20px;">
        {% for room in rooms %}
        <div style="border: 1px solid #eee; border-radius: var(--radius); overflow: hidden; display: flex; flex-direction: column;">
            <div style="height: 150px; overflow: hidden;">
                <img src="{{ room.image_url }}" style="width: 100%; height: 100%; object-fit: cover; transition: 0.3s;" onerror="this.src='https://via.placeholder.com/400'">
            </div>
            <div style="padding: 12px; flex-grow: 1;">
                <h4 style="font-size: 14px; margin-bottom: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{{ room.title }}</h4>
                <p style="font-weight: bold; color: var(--dark);">${{ room.price_per_month }}</p>
            </div>
            
            <!-- Edit / Delete Actions -->
            <div style="padding: 12px; padding-top: 0; display: flex; gap: 10px;">
                <a href="/edit_room/{{ room.id }}" style="flex: 1; text-align: center; padding: 8px; background: #f7f7f7; color: var(--dark); border-radius: 6px; text-decoration: none; font-size: 13px; font-weight: 600; border: 1px solid #ddd;">Edit</a>
                
                <form action="/delete_room/{{ room.id }}" method="POST" style="flex: 1;" onsubmit="return confirm('Are you sure you want to permanently delete this listing? This cannot be undone.');">
                    <button type="submit" style="width: 100%; padding: 8px; background: var(--primary); color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 13px; font-weight: 600;">Delete</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div style="text-align: center; padding: 40px; background: #f9f9f9; border-radius: 12px; margin-top: 20px;">
        <i class="fas fa-home" style="font-size: 32px; color: #ddd; margin-bottom: 10px;"></i>
        <p style="color: var(--gray);">You haven't posted any listings yet.</p>
    </div>
    {% endif %}

</div>
{% endblock %}