{% extends 'base.html' %}

{% block content %}
<div class="container" style="max-width: 800px; margin-top: 40px;">
    
    <!-- Profile Header -->
    <div style="display: flex; gap: 30px; align-items: flex-start; margin-bottom: 40px;">
        <div style="flex-shrink: 0;">
            {% if user.profile_image_url %}
            <img src="{{ user.profile_image_url }}" alt="Profile" style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover; box-shadow: var(--shadow);">
            {% else %}
            <div style="width: 150px; height: 150px; background: #ddd; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 60px; color: var(--gray);">
                <i class="fas fa-user"></i>
            </div>
            {% endif %}
        </div>
        <div style="flex-grow: 1;">
            <h1>{{ user.full_name }}</h1>
            <p style="color: var(--gray); margin-top: 5px;">Member since {{ user.created_at[:4] }}</p>
            <p style="margin-top: 15px;"><strong>Email:</strong> {{ user.email }}</p>
        </div>
    </div>

    <hr style="border: 0; border-top: 1px solid #ddd; margin-bottom: 30px;">

    <!-- User Buildings -->
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h3>My Buildings</h3>
        <a href="/upload" class="btn-primary" style="padding: 8px 16px; font-size: 14px;"><i class="fas fa-plus"></i> List New Building</a>
    </div>
    
    {% if buildings %}
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 20px; margin-top: 20px;">
        {% for building in buildings %}
        <div style="border: 1px solid #eee; border-radius: 12px; overflow: hidden; display: flex; flex-direction: column;">
            <div style="height: 150px; overflow: hidden;">
                <img src="{{ building.image_url }}" style="width: 100%; height: 100%; object-fit: cover;" onerror="this.src='https://via.placeholder.com/400'">
            </div>
            <div style="padding: 12px; flex-grow: 1;">
                <h4 style="font-size: 14px; margin-bottom: 4px;">{{ building.title }}</h4>
                <p style="font-size: 13px; color:var(--gray);">{{ building.city }}</p>
            </div>
            
            <div style="padding: 12px; background:#f9f9f9; text-align:center;">
                <a href="/building/{{ building.id }}" style="font-weight:600; color:var(--primary); text-decoration:none;">Manage Rooms</a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div style="text-align: center; padding: 40px; background: #f9f9f9; border-radius: 12px; margin-top: 20px;">
        <i class="fas fa-building" style="font-size: 32px; color: #ddd; margin-bottom: 10px;"></i>
        <p style="color: var(--gray);">You haven't posted any buildings yet.</p>
    </div>
    {% endif %}

</div>
{% endblock %}